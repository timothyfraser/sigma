# Appendix: test

```{r setup_test, include=FALSE}
## Global options
knitr::opts_chunk$set(cache = FALSE, message = FALSE, warning = FALSE)

# Fix graphics API version mismatch issues by avoiding ragg
knitr::opts_chunk$set(dev = "png")
library(knitr)
library(kableExtra)
library(magick)
library(dplyr)
library(ggplot2)

## Configure reticulate to use existing Python
library(reticulate)

# Use your specific Python installation
# Try common Python paths (uncomment/modify for your system)
python_path <- NULL

# Try macOS common paths first
mac_paths <- c(
  "/opt/anaconda3/bin/python3",
  "/usr/local/bin/python3",
  "/opt/homebrew/bin/python3"
)

for (path in mac_paths) {
  if (file.exists(path)) {
    python_path <- path
    break
  }
}

# If no common path found, try system Python
if (is.null(python_path)) {
  system_python <- Sys.which("python3")
  if (system_python != "" && file.exists(system_python)) {
    python_path <- system_python
  }
}

# Configure Python if found, otherwise let reticulate auto-discover
if (!is.null(python_path) && file.exists(python_path)) {
  use_python(python_path, required = FALSE)
  Sys.setenv(RETICULATE_PYTHON = python_path)
  cat("Using Python at:", python_path, "\n")
} else {
  cat("No specific Python path found, letting reticulate auto-discover\n")
  # Don't set invalid paths - let reticulate handle it
}

# Prevent reticulate from downloading Python
options(reticulate.conda_binary = NULL)
```

## Getting Started {-}

This is just a test document, placed at the end of the book.
```{r, message = FALSE, warning = FALSE}
library(dplyr)
```


### Version 1 {.unnumbered}

::: {.tabset}

#### R
```{r}
# R code
mtcars$hp %>% mean()
```

#### Python

```{python}
# Python code
import pandas as pd
data = pd.DataFrame({'hello': [1,2,3]})
print(data.hello.mean())
```

:::

### Version 2 {-}

<div>
  <button onclick="toggleCode('r-code')" class="button">R</button>
  <button onclick="toggleCode('python-code')" class="button button-python">Python</button>
</div>


<div id="r-code" style="display: block;">
```{r}
# R code
mtcars$hp %>% mean()
```
</div> 
<div id="python-code" style="display: none;"> 
```{python}
# Python code
import pandas as pd
data = pd.DataFrame({'hello': [1,2,3]})
print(data.hello.mean())
```
</div> 
<script> function toggleCode(codeType) { document.getElementById('r-code').style.display = 'none'; document.getElementById('python-code').style.display = 'none'; document.getElementById(codeType).style.display = 'block'; } </script>


Did it work?

